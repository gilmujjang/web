<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clock</title>
    <style>
        .js-clock{
            padding: 0;
            margin: 0;
            font-size: 60px;
            text-align: center;
            background-color: whitesmoke;
            width: 500px;
        }

        #box{
            width: 500px;
            padding: 10px;
            background-color: black;

        }

        .js-title{
            margin: 0;
        }

        .js-form{
            display: none;
        }

        .js-greetings{
            font-size: 36px;
            margin: 0;
        }

        .form, .gretting{
            display: none;
        }

        .showing{
            display: block;
        }
    </style>
</head>
<body>
    <div id="box">
        <div class="js-clock">
            <h1 class="js-title">00:00:00</h1>
        </div>
    </div>
    <form class="js-form form">
        <input type="text" placeholder="What is your name">
    </form>
    <h4 class="js-greetings greeting"></h4>
    <script>
        const clockContainer = document.querySelector(".js-clock");
        const clockTitle = clockContainer.querySelector("h1");
        
        function getTime(){
            const date = new Date();
            const minutes = date.getMinutes();
            const hours = date.getHours();
            const seconds = date.getSeconds();
            clockTitle.innerText = `${hours < 10 ? `0${hours}`: hours}:${
                minutes < 10 ? `0${minutes}`: minutes
            }:${seconds < 10 ? `0${seconds}`: seconds}`;
        }
        
        function init(){
            getTime();
            setInterval(getTime, 1000);
        }
        
        init();
    </script>
    <script>
        const form = document.querySelector(".js-form");
        const input = form.querySelector("input");
        const USER_LS = "currentUser";
        const greeting = document.querySelector(".js-greetings");
        const SHOWING_CN = "showing";

        function saveName(text){
            localStorage.setItem(USER_LS, text);
        }

        function paintGreeting(text){
            form.classList.remove(SHOWING_CN);
            greeting.classList.add(SHOWING_CN);
            greeting.innerText = `Hello ${text}`;
        }
        function handleSubmit(event){
            event.preventDefault();
            const currentValue = input.value;
            paintGreeting(currentValue);
            saveName(currentValue);
        }

        function askForName(){
            greeting.classList.remove(SHOWING_CN);
            form.classList.add(SHOWING_CN);
            form.addEventListener("submit", handleSubmit);
        }

        function loadName(){
            const currentUser = localStorage.getItem(USER_LS);
            if(currentUser === null){
                askForName();
            } 
            else{
                paintGreeting(currentUser);
            }
        }
        function init(){
            loadName();
        }
        init();
    </script>
</body>
</html>